#!/bin/zsh

private file=$XDG_CONFIG_HOME/youtube-pl/playlists.json

private -a playlist
playlist=(`jq -r '.playlists[].title' $file`)

private title=`printf '%s\n' $playlist | dmenu -p youtube-pl ${=DMENU}`

private id=`jq -r ".playlists[]|select(.title==\"$title\").id" $file`

if [[ -n $id ]]; then
  notify-send youtube-pl 'Downloading playlist...'
  mpv --shuffle ytdl://$id
fi
