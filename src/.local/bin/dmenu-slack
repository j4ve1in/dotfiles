#!/bin/bash

declare json="`cat <<EOF
{
  "team": [
    {
      "name": "archlinuxjp",
      "url": "https://archlinuxjp.slack.com"
    },
    {
      "name": "vim-jp",
      "url": "https://vim-jp.slack.com"
    },
    {
      "name": "kubernetes",
      "url": "https://kubernetes.slack.com"
    }
  ]
}
EOF`"

declare name=$(
  printf '%s\n' $(echo $json | jq -r '.team[].name') | \
    dmenu-wrapper -p Slack
)

echo $json |
  jq -r ".team[]|select(.name==\"$name\").url" | \
  xargs -I {} chromium --app={}
