#!/bin/bash

declare file="$XDG_CONFIG_HOME/dmenu-slack/team.json"

if ! [[ -f $file ]]; then
  notify-send dmenu-slack "config file not found: $file"
  exit 1
fi

declare name=$(
  printf '%s\n' $(jq -r '.team[].name' $file) | \
    dmenu-wrapper -p Slack
)

jq -r ".team[]|select(.name==\"$name\").url" $file | \
  xargs -I {} chromium --app={}
