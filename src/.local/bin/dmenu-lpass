#!/bin/zsh

if ! lpass status -q; then
  termite -e "lpass login $LPASS_USERNAME"
fi

name=`
  lpass ls | \
    sed -E 's/ \[id: ([0-9]+)\]//' | \
    dmenu -p dmenu-lpass ${=DMENU}
`

if [[ $name ]]; then
  lpass show --password -c $name
  notify-send dmenu-lpass "Copied password: $name"
fi
