typeset name note_type
name=$(lpass show --name ${LPASS_BOOKMARKS[@]} | $SELECTOR)
[ -z "$name" ] && return 1

note_type="$(lpass show --field=NoteType $name)"

if [ "$note_type" = "SSH Key" ]; then
  BUFFER="lpass show -c --field=Passphrase \"$name\""
else
  BUFFER="lpass show -c --password \"$name\""
fi

CURSOR=$#BUFFER
zle accept-line
zle -R -c

# vim: ft=zsh sw=2 ts=2 et
