typeset HOST
HOST=$(cat <(cat ~/.ssh/config /etc/ssh/ssh_config 2> /dev/null | command grep -i '^host' | command grep -v '*') \
  <(command grep -v '^\s*\(#\|$\)' /etc/hosts | command grep -Fv '0.0.0.0') |
  awk '{if (length($2) > 0) {print $2}}' | sort -u | $SELECTOR)

[ -z "$HOST" ] && return 1

BUFFER="tmux new-window ssh $HOST"
CURSOR=$#BUFFER
zle accept-line
zle -R -c

# vim: ft=zsh sw=2 ts=2 et
